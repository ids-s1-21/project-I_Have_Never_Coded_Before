---
title: "codingab"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load-packages, include = FALSE}
# Add any additional packages you need to this chunk
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
library(here)
```

```{r load-data, include=FALSE}
# Load your data here
police_data <- read_csv(here("data/Innocent Deaths caused by Police (All time).csv"))
head(police_data)

glimpse(head(police_data))

police_data <- rename(police_data, unique_id = `Unique ID`, name = Name, age = Age, gender = Gender, race = Race, doi = `Date of injury resulting in death (month/day/year)`, loi_address = `Location of injury (address)`, state = State, lod_zip_code = `Location of death (zip code)` , lod_county = `Location of death (county)`, latitude = Latitude, longitude = Longitude,  agency_involved = `Agency or agencies involved`, hlof = `Highest level of force`, alleged_weapon = `Alleged weapon`, agressive_movement = `Aggressive physical movement`, fleeing_not_fleeing = `Fleeing/Not fleeing`, description_temp = `Description Temp`, dispositions_exclusions =`Dispositions/Exclusions INTERNAL USE, NOT FOR ANALYSIS`, iuof = `Intended use of force (Developing)`, mental_illness = `Foreknowledge of mental illness`)

#doi = date of injury resulting in death, loi= location of injury resulting in death, lod = location of death, hlof = highest level of force, iuof = intended use of force

police_data <- subset(police_data, select = -c(6, 8, 13, 21, 22, 23, 26))
police_data1 <- police_data %>%
  filter(age < 18)

police_data_innocent <- police_data %>%
  filter(alleged_weapon == "None") %>%
  filter(agressive_movement == "None") %>%
  filter(fleeing_not_fleeing == "Not fleeing")
```
## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
police_state_race <- police_data %>% 
  mutate(
    race = case_when(
      name == "Oliver Sevin Frazier-Savoy" ~ "European-American/White",
      TRUE ~ race
    )
  )

police_state_race <- police_state_race %>% group_by(state,race) %>% count(state)

#police_state_race %>%
  #ggplot(aes(x = state, y = n, color = race)) +
  #geom_col() 
  #facet_wrap(~ race, nrow = 4)

ggplot() + geom_col(police_state_race, mapping = aes(x = state, y = n, color = race)) + facet_wrap(~ race, nrow = 4) + labs( x = "Year", y = "Number of Deaths", title = "Police Deaths by Race") + scale_x_discrete(guide = guide_axis(angle = 45))
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
